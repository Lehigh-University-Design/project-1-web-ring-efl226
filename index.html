<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Record Collection</title>
</head>

<!-- Header-->
<header>
    <h1>Album Explorer</h1>
    <p>Explore my favorite vinyl records!</p>
</header>
 
<body>
    <canvas id="canvas"></canvas>
    <script> 
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // Now I am going to add albums to the page statically
        //Albums with cover + title + position
        const albums = [
      { title: "Young M.A. - Herstory EP", cover: "images/albums/Young_M.A_Herstory_-_EP.jpg", x: 100, y: 100 },
      { title: "98", cover: "images/albums/98°_2.0.jpg", x: 400, y: 100 },
      { title: "B.o.B - Underground Luxury", cover: "images/albums/B.o.B_Underground_Luxury.jpg", x: 700, y: 100 },
      { title: "Bobby Caldwell - Perfect Island Nights", cover: "images/albums/bobbycaldwell_perfectislandnights_d4m2.jpg", x: 1000, y: 100 },
      { title: "Brett Eldredge - Bring You Back", cover: "images/albums/Brett_Eldredge_Bring_You_Back.jpg", x: 100, y: 400 },
      { title: "Bruce Faulconer - DragonBall Z Lost Tracks Vol. 6", cover: "images/albums/Bruce_Faulconer_The_Best_of_DragonBall_Z,_Vol._6_-_The_Lost_Tracks_of_DBZ.jpg", x: 400, y: 400 },
      { title: "Bruno Mars - 24K Magic", cover: "images/albums/Bruno_Mars_24K_Magic.jpg", x: 700, y: 400 },
      { title: "C.W. McCall - Greatest Hits", cover: "images/albums/C.W._McCall_C._W._McCall's_Greatest_Hits.jpg", x: 1000, y: 400 },
      { title: "Charlie Puth - Nine Track Mind", cover: "images/albums/Charlie_Puth_Nine_Track_Mind.jpg", x: 100, y: 700 },
      { title: "Cody Simpson - 4 U EP", cover: "images/albums/Cody_Simpson_4_U_-_Ep.jpg", x: 400, y: 700 },
      { title: "Cordae - The Lost Boy", cover: "images/albums/cordae_thelostboy_fq2k.jpg", x: 700, y: 700 },
      { title: "D.H.T. ft. Edmée - Listen to Your Heart", cover: "images/albums/D.H.T._Featuring_Edmée_Listen_to_Your_Heart.jpg", x: 1000, y: 700 },
      { title: "Daryl Hall & John Oates - Greatest Hits", cover: "images/albums/Daryl_Hall_&_John_Oates_Greatest_Hits.jpg", x: 1300, y: 100 },
      { title: "David Guetta - 7", cover: "images/albums/David_Guetta_7.jpg", x: 1300, y: 400 },
      { title: "David Guetta & Showtek - Your Love Single", cover: "images/albums/davidguettashowtek_yourlovesingle_b2co.jpg", x: 1300, y: 700 },
      { title: "Dean Martin - The Dean Martin TV Show", cover: "images/albums/deanmartin_thedeanmartintvshow_fauu.jpg", x: 1600, y: 100 },
      { title: "D.R.U.G.S. - Destroy Rebuild Until God Shows", cover: "images/albums/Destroy_Rebuild_Until_God_Shows_(D.R.U.G.S.)_D.R.U.G.S..jpg", x: 1600, y: 400 },
      { title: "DJ Snake & Lil Jon - Turn Down for What (Remix)", cover: "images/albums/DJ_Snake_&_Lil_Jon_Turn_Down_for_What_(Remix)_[feat._Juicy_J,_2_Chainz_&_French_Montana]_-_Single.jpg", x: 1600, y: 700 },
      { title: "Dream Theater - Six Degrees of Inner Turbulence", cover: "images/albums/Dream_Theater_Six_Degrees_of_Inner_Turbulence.jpg", x: 1900, y: 100 },
      { title: "Eagles - Greatest Hits 1971-1975", cover: "images/albums/Eagles_Their_Greatest_Hits_1971-1975.jpg", x: 1900, y: 400 }
    ];


    //track pan/zoom features
    let offsetX = 0, offsetY = 0, scale = 1;
    let isDragging = false, startX, startY;

    canvas.addEventListener("mousedown", e => {
      isDragging = true;
      startX = e.clientX - offsetX;
      startY = e.clientY - offsetY;
    });
    canvas.addEventListener("mouseup", () => {
      isDragging = false;
    });
    canvas.addEventListener("mouseleave", () => {
      isDragging = false;
    });
    canvas.addEventListener("mousemove", e => {
      if (!isDragging) return;
      offsetX = e.clientX - startX;
      offsetY = e.clientY - startY;
    });
    canvas.addEventListener("wheel", e => {
      e.preventDefault();
      const zoom = e.deltaY < 0 ? 1.1 : 0.9;
      scale *= zoom;
    });

    //Create a function to draw the albums
    function draw() {
        ctx.setTransform(scale, 0, 0, scale, offsetX, offsetY);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.setTransform(scale, 0, 0, scale, offsetX, offsetY);
        albums.forEach(album => {
            if(album.img && album.img.complete){
                ctx.drawImage(album.img,album.x, album.y, 150, 150);
            } else{
                ctx.fillStyle = "gray";
                ctx.fillRect(album.x, album.y, 150, 150);
            }
            ctx.fillStyle = "#b76935";
            ctx.font = "16px Montserrat, sans-serif";
            ctx.fillText(album.title, album.x, album.y + 170);
        });
    }

    let loadedCount = 0;
    albums.forEach(album => {
        album.img = new Image();
        album.img.src = album.cover;
        album.img.onload = () => {
            loadedCount++;
            album.img = img;
            if (loadedCount === albums.length) {
                draw();
            }
        };
        img.onerror = () => {
            console.error("Failed to load image:", album.cover);
            loadedCount++;
            if (loadedCount === albums.length) {
                draw();
            }
        };
    });
    </script>
</body>
</html>