<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Record Collection</title>
</head>


 
<body>
    <header>
      <div>
        <h1>Album Explorer</h1>
        <button id="toggleViewBtn">Switch to Carousel View</button>
        <div>
        <button id="resetViewBtn">Reset Grid View</button>
        </div>
      </div>
    </header>
        
        
    
    
    <canvas id="canvas"></canvas>
    <script> 
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let viewMode = "grid"; // "grid" or "carousel"
        let currentIndex = 0;  // for carousel mode

        // Now I am going to add albums to the page statically
        //Albums with cover + title + position
    const albums = [
  {
    title: "Young M.A. - Herstory EP",
    cover: "images/albums/Young_M.A_Herstory_-_EP.jpg",
    x: 100, y: 100,
    releaseDate: "2017-04-27",
    genre: "Hip Hop",
    description: "Debut EP by Young M.A. including breakout single “OOOUUU”; confident lyricism, gritty beats, personal reflections."
  },
  {
    title: "98 - 2.0",
    cover: "images/albums/98°_2.0.jpg",
    x: 400, y: 100,
    releaseDate: "2013-05-07",
    genre: "Pop",
    description: "98° comeback album; nostalgic pop harmonies, mid-tempo grooves with R&B touches."
  },
  {
    title: "B.o.B - Underground Luxury",
    cover: "images/albums/B.o.B_Underground_Luxury.jpg",
    x: 700, y: 100,
    releaseDate: "2013-12-17",
    genre: "Hip Hop",
    description: "Third album by B.o.B; mixing pop rap and introspective tracks with commercial hooks."
  },
  {
    title: "Bobby Caldwell - Perfect Island Nights",
    cover: "images/albums/bobbycaldwell_perfectislandnights_d4m2.jpg",
    x: 1000, y: 100,
    releaseDate: "2005-02-01",
    genre: "Jazz",
    description: "Smooth jazz and romantic ballads; mellow arrangements evoking island evenings."
  },
  {
    title: "Brett Eldredge - Bring You Back",
    cover: "images/albums/Brett_Eldredge_Bring_You_Back.jpg",
    x: 100, y: 400,
    releaseDate: "2013-08-06",
    genre: "Country",
    description: "Country-pop debut; polished vocals, romantic themes, built for radio acclaim."
  },
  {
    title: "Bruce Faulconer - DragonBall Z Lost Tracks Vol. 6",
    cover: "images/albums/Bruce_Faulconer_The_Best_of_DragonBall_Z,_Vol._6_-_The_Lost_Tracks_of_DBZ.jpg",
    x: 400, y: 400,
    releaseDate: "Unknown",
    genre: "Soundtrack",
    description: "Compilation of unused or rare score tracks from DragonBall Z; orchestral and thematic instrumentals."
  },
  {
    title: "Bruno Mars - 24K Magic",
    cover: "images/albums/Bruno_Mars_24K_Magic.jpg",
    x: 700, y: 400,
    releaseDate: "2016-11-18",
    genre: "R&B",
    description: "Retro-funk/R&B revival; bold production and confident partying themes."
  },
  {
    title: "C.W. McCall - Greatest Hits",
    cover: "images/albums/C.W._McCall_C._W._McCall's_Greatest_Hits.jpg",
    x: 1000, y: 400,
    releaseDate: "1983-01-01",
    genre: "Country",
    description: "Greatest hits collection from C. W. McCall; classic country storytelling including “Convoy.”"
  },
  {
    title: "Charlie Puth - Nine Track Mind",
    cover: "images/albums/Charlie_Puth_Nine_Track_Mind.jpg",
    x: 100, y: 700,
    releaseDate: "2016-01-29",
    genre: "Pop",
    description: "Charlie Puth’s debut pop album; romantic ballads, smooth voice, radio hits like “One Call Away.”"
  },
  {
    title: "Cody Simpson - 4 U EP",
    cover: "images/albums/Cody_Simpson_4_U_-_Ep.jpg",
    x: 400, y: 700,
    releaseDate: "2014-12-23",
    genre: "Pop",
    description: "EP of youthful pop; upbeat melodies, beach vibes, teen-friendly hooks."
  },
  {
    title: "Cordae - The Lost Boy",
    cover: "images/albums/cordae_thelostboy_fq2k.jpg",
    x: 700, y: 700,
    releaseDate: "2019-07-26",
    genre: "Hip Hop",
    description: "Debut album by Cordae; introspective lyrics, social commentary, combining classic & modern rap."
  },
  {
    title: "D.H.T. ft. Edmée - Listen to Your Heart",
    cover: "images/albums/D.H.T._Featuring_Edmée_Listen_to_Your_Heart.jpg",
    x: 1000, y: 700,
    releaseDate: "2005-04-25",
    genre: "Eurodance",
    description: "Energetic dance cover hit; pulsating synths and pop vocals made for dance floors."
  },
  {
    title: "David Guetta - 7",
    cover: "images/albums/David_Guetta_7.jpg",
    x: 1300, y: 100,
    releaseDate: "2018-09-14",
    genre: "EDM",
    description: "Seventh studio album by Guetta; big dance-floor tracks, features, electronic bangers."
  },
  {
    title: "David Guetta & Showtek - Your Love Single",
    cover: "images/albums/davidguettashowtek_yourlovesingle_b2co.jpg",
    x: 1300, y: 400,
    releaseDate: "2014-09-29",
    genre: "Dance",
    description: "Single collaboration built for clubs; high energy and vibrant beats."
  },
  {
    title: "Dean Martin - The Dean Martin TV Show",
    cover: "images/albums/deanmartin_thedeanmartintvshow_fauu.jpg",
    x: 1600, y: 100,
    releaseDate: "Original series era c.1960s",
    genre: "Easy Listening",
    description: "Compilation of performances from Dean Martin’s TV show; crooner vocals, showbiz style."
  },
  {
    title: "D.R.U.G.S. - Destroy Rebuild Until God Shows",
    cover: "images/albums/Destroy_Rebuild_Until_God_Shows_(D.R.U.G.S.)_D.R.U.G.S..jpg",
    x: 1600, y: 400,
    releaseDate: "2011-02-22",
    genre: "Post-Hardcore",
    description: "Debut studio album by D.R.U.G.S.; heavy guitars, screamo vocals, emotionally raw intensity."
  },
  {
    title: "DJ Snake & Lil Jon - Turn Down for What (Remix)",
    cover: "images/albums/DJ_Snake_&_Lil_Jon_Turn_Down_for_What_(Remix)_[feat._Juicy_J,_2_Chainz_&_French_Montana]_-_Single.jpg",
    x: 1600, y: 700,
    releaseDate: "2014-May-remix", 
    genre: "Trap/Electronic",
    description: "Big festival trap remix; high energy drop, heavy bass, built for parties."
  },
  {
    title: "Dream Theater - Six Degrees of Inner Turbulence",
    cover: "images/albums/Dream_Theater_Six_Degrees_of_Inner_Turbulence.jpg",
    x: 1900, y: 100,
    releaseDate: "2002-01-29",
    genre: "Progressive Metal",
    description: "Concept double album; musical complexity, thematic explorations of struggle and psyche."
  },
  {
    title: "Eagles - Greatest Hits 1971-1975",
    cover: "images/albums/Eagles_Their_Greatest_Hits_1971-1975.jpg",
    x: 1900, y: 400,
    releaseDate: "1976-02-17",
    genre: "Rock",
    description: "Defining collection from Eagles; country rock harmonies, timeless songs like “Hotel California.”"
  },
  {
    title: "Yo-Yo Ma & Silkroad Ensemble - Sing Me Home",
    cover: "images/albums/Yo-Yo_Ma_&_Silkroad_Ensemble_Sing_Me_Home.jpg",
    x: 1900, y: 700,
    releaseDate: "2016-03-25",
    genre: "Classical / World",
    description: "Collaborative world/classical music project; cello, global instruments, reflective themes of home."
  },
  {
    title: "A.B. Quintanilla III Presents Kumbia Kings - Greatest Hits",
    cover: "images/albums/A.B._Quintanilla_III_Presents_Kumbia_Kings_A.B._Quintanilla_III___Kumbia_Kings_Presents_Greatest_Hits_(Album_Versions).jpg",
    x: 2200, y: 100,
    releaseDate: "2007-06-12",
    genre: "Latin",
    description: "Hits compilation from the Kumbia Kings; cumbia plus pop-Latino rhythms and upbeat dance tracks."
  },
  {
    title: "A.R. Rahman - Lagaan (OST)",
    cover: "images/albums/A.R._Rahman_Lagaan_(Original_Motion_Picture_Soundtrack).jpg",
    x: 2200, y: 400,
    releaseDate: "2001-06-15",
    genre: "Soundtrack",
    description: "Oscar-nominated soundtrack from the film Lagaan; orchestral and traditional Indian instrumentation."
  },
  {
    title: "ATLUS Sound Team - Persona 5 (OST)",
    cover: "images/albums/ATLUS_Sound_Team_Persona_5_(Original_Soundtrack).jpg",
    x: 2200, y: 700,
    releaseDate: "2016-09-15",
    genre: "Soundtrack",
    description: "Cinematic video game score; jazz, rock, orchestral blends that match Persona 5’s mood."
  },
  {
    title: "Aventura - K.O.B. Live",
    cover: "images/albums/Aventura_K.O.B._Live.jpg",
    x: 2500, y: 100,
    releaseDate: "2005-02-08",
    genre: "Latin / Bachata",
    description: "Live album by Aventura; energetic bachata rhythms and romantic live performances."
  },
  {
    title: "Everclear - Ten Years Gone - The Best of Everclear 1994-2004",
    cover: "images/albums/Everclear_Ten_Years_Gone_-_The_Best_of_Everclear_1994-2004.jpg",
    x: 2500, y: 400,
    releaseDate: "2005-05-10",
    genre: "Alternative Rock",
    description: "Greatest hits from Everclear over ten years; loud guitars, catchy choruses."
  },
  {
    title: "EXTREME - SIX",
    cover: "images/albums/EXTREME_SIX.jpg",
    x: 2500, y: 700,
    releaseDate: "1992-01-20",
    genre: "Rock",
    description: "Sixth studio album by Extreme; includes hard rock tracks and signature guitar riffs."
  },
  {
    title: "Fifth Harmony - 7/27 (Deluxe)",
    cover: "images/albums/Fifth_Harmony_7_27_(Deluxe).jpg",
    x: 2800, y: 100,
    releaseDate: "2016-05-27",
    genre: "Pop",
    description: "Deluxe version of 7/27; polished vocal pop with powerful harmonies and dance hooks."
  },
  {
    title: "Flo Rida - R.O.O.T.S. (Deluxe Version)",
    cover: "images/albums/Flo_Rida_R.O.O.T.S._(Deluxe_Version).jpg",
    x: 2800, y: 400,
    releaseDate: "2009-10-16",
    genre: "Hip Hop",
    description: "Deluxe edition of R.O.O.T.S; high energy rap tracks, club bangers, guest features."
  },
  {
    title: "Florida Georgia Line - Can't Say I Ain't Country",
    cover: "images/albums/Florida_Georgia_Line_Can't_Say_I_Ain't_Country.jpg",
    x: 2800, y: 700,
    releaseDate: "2014-02-18",
    genre: "Country",
    description: "Country pop album by Florida Georgia Line; modern country with crossover appeal."
  },
  {
    title: "G-Eazy - These Things Happen",
    cover: "images/albums/G-Eazy_These_Things_Happen.jpg",
    x: 3100, y: 100,
    releaseDate: "2014-06-23",
    genre: "Hip Hop",
    description: "Debut studio album by G-Eazy; gritty style, autobiographical lyrics, laid-back production."
  },
  {
    title: "Grimes - Visions",
    cover: "images/albums/Grimes_Visions.jpg",
    x: 3100, y: 400,
    releaseDate: "2012-January-24",
    genre: "Electronic",
    description: "Grimes’s breakthrough album; ethereal synth-pop, lo-fi beats and dreamy soundscapes."
  },
  {
    title: "HerbAlpertTheTijuana - The Beat of the Brass",
    cover: "images/albums/herbalpertthetijuana_thebeatofthebrass12b_h4ni.jpg",
    x: 3100, y: 700,
    releaseDate: "1968-04-01",
    genre: "Easy Listening",
    description: "Brass-led instrumental pop; trumpet, festive arrangements, cheerful atmosphere."
  }
];



 //track pan/zoom features
    let offsetX = 0, offsetY = 0, scale = 1;
    let isDragging = false, startX, startY;

    // animation state
    let isAnimating = false;
    let animStart = null;
    let animDuration = 600; // ms
    let startScale, startOffsetX, startOffsetY;
    let targetScale, targetOffsetX, targetOffsetY;
    let zoomedAlbum = null;

    canvas.addEventListener("mousedown", e => {
        if (viewMode !== "grid" || isAnimating) return;
        isDragging = true;
        startX = e.clientX - offsetX;
        startY = e.clientY - offsetY;
    });
    canvas.addEventListener("mouseup", () => {
        isDragging = false;
    });
    canvas.addEventListener("mouseleave", () => {
        isDragging = false;
    });
    canvas.addEventListener("mousemove", e => {
        if (viewMode !== "grid" || isAnimating) return;
        if (isDragging) {
            offsetX = e.clientX - startX;
            offsetY = e.clientY - startY;
            draw();
        }
    });
    canvas.addEventListener("wheel", e => {
        if (viewMode !== "grid" || isAnimating) return;
        e.preventDefault();
        const zoom = e.deltaY < 0 ? 1.1 : 0.9;
        scale *= zoom;
        draw();
    });

    //Create a function to draw the albums
    function draw() {
        ctx.setTransform(1, 0, 0, 1, 0, 0);
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        if (viewMode == "grid"){
            ctx.setTransform(scale, 0, 0, scale, offsetX, offsetY);
            albums.forEach(album => {
                if(album.img && album.img.complete){
                    ctx.drawImage(album.img,album.x, album.y, 150, 150);
                } else{
                    ctx.fillStyle = "gray";
                    ctx.fillRect(album.x, album.y, 150, 150);
                }
            });
        } else if (viewMode == 'carousel'){
            const album = albums[currentIndex];
            const imgSize = Math.min(canvas.width, canvas.height) * 0.5;
            const imgX = (canvas.width - imgSize) / 2;
            const imgY = (canvas.height - imgSize) / 2 - 150;

            //Error handling for image loading
            if (album.img && album.img.complete) {
                ctx.drawImage(album.img, imgX, imgY, imgSize, imgSize);
            } else {
                ctx.fillStyle = "gray";
                ctx.fillRect(imgX, imgY, imgSize, imgSize);
            }

            ctx.fillStyle = "#b76935";
            ctx.font = "16px Montserrat, sans-serif";
            ctx.textAlign = "center";

            let textY = imgY + imgSize + 40;
            // Display album title
            ctx.fillText(album.title, canvas.width / 2, textY);
            //Display release date
            ctx.fillText(`Release Date: ${album.releaseDate}`, canvas.width / 2, textY + 24);
            //Display genre
            ctx.fillText(`Genre: ${album.genre}`, canvas.width / 2, textY + 48);
            //Display description
            ctx.fillText(album.description, canvas.width / 2, textY + 72, canvas.width * 0.8);
        }

        // extra: overlay details when zoom finishes in grid
        if (zoomedAlbum && !isAnimating && viewMode === "grid") {
            ctx.setTransform(1, 0, 0, 1, 0, 0);
            ctx.fillStyle = "#b76935";
            ctx.font = "18px Montserrat, sans-serif";
            ctx.textAlign = "center";

            let textY = canvas.height * 0.75;
            ctx.fillText(zoomedAlbum.title, canvas.width / 2, textY);
            ctx.fillText(`Release Date: ${zoomedAlbum.releaseDate}`, canvas.width / 2, textY + 24);
            ctx.fillText(`Genre: ${zoomedAlbum.genre}`, canvas.width / 2, textY + 48);
            ctx.fillText(zoomedAlbum.description, canvas.width / 2, textY + 72, canvas.width * 0.8);
        }
    }

    let loadedCount = 0;
    albums.forEach(album => {
        const img = new Image();
        img.src = album.cover;
        img.onload = () => {
            loadedCount++;
            album.img = img;
            if (loadedCount === albums.length) {
                autoFit();
                draw();
            }
        };
        img.onerror = () => {
            console.error("Failed to load image:", album.cover);
            loadedCount++;
            if (loadedCount === albums.length) {
                autoFit();
                draw();
            }
        };
    });

    //Auto-fit function 
    function autoFit() {
        const minX = Math.min(...albums.map(a => a.x));
        const minY = Math.min(...albums.map(a => a.y));
        const maxX = Math.max(...albums.map(a => a.x + 150));
        const maxY = Math.max(...albums.map(a => a.y + 600));

        const contentWidth = maxX - minX;
        const contentHeight = maxY - minY;

        const scaleX = canvas.width / contentWidth;
        const scaleY = canvas.height / contentHeight;
        scale = Math.min(scaleX, scaleY) * 0.9;

        offsetX = (canvas.width - contentWidth * scale) / 2 - minX * scale;
        offsetY = (canvas.height - contentHeight * scale) / 2 - minY * scale;
    }

    //Toggle view Button
    document.getElementById("toggleViewBtn").addEventListener("click", () => {
        if (viewMode === "grid") {
            viewMode = "carousel";
           document.getElementById("toggleViewBtn").innerText = "Switch to Grid View";
        } else {
            viewMode = "grid";
            zoomedAlbum = null; // reset zoom
            document.getElementById("toggleViewBtn").innerText = "Switch to Carousel View";
        }
        draw();
    });

    //Reset View Button
    document.getElementById("resetViewBtn").addEventListener("click", () => {
        if (viewMode === "grid") {
            autoFit();
            zoomedAlbum = null;
            draw();
        }
    });

    //Carousel navigation
    document.addEventListener("keydown", e => {
        if (viewMode !== "carousel") return;
        if (e.key === "ArrowRight") {
            currentIndex = (currentIndex + 1) % albums.length;
            draw();
        } else if (e.key === "ArrowLeft") {
            currentIndex = (currentIndex - 1 + albums.length) % albums.length;
            draw();
        }
    });

    // Animate zoom helper
    function animateZoom(timestamp) {
        if (!animStart) animStart = timestamp;
        const progress = Math.min((timestamp - animStart) / animDuration, 1);

        const t = progress * (2 - progress); // easing

        scale = startScale + (targetScale - startScale) * t;
        offsetX = startOffsetX + (targetOffsetX - startOffsetX) * t;
        offsetY = startOffsetY + (targetOffsetY - startOffsetY) * t;

        draw();

        if (progress < 1) {
            requestAnimationFrame(animateZoom);
        } else {
            isAnimating = false;
        }
    }

    // Get more album details on click 
    canvas.addEventListener("click", e => {
        if (viewMode !== "grid" || isAnimating) return;
        
        const rect = canvas.getBoundingClientRect();
        const x = (e.clientX - rect.left - offsetX) / scale;
        const y = (e.clientY - rect.top - offsetY) / scale;

        for (let i = 0; i < albums.length; i++) {
            const album = albums[i];
            if(
                x >= album.x && x <= album.x + 150 &&
                y >= album.y && y <= album.y + 150
            ) {
                zoomedAlbum = album;

                // prepare zoom animation
                startScale = scale;
                startOffsetX = offsetX;
                startOffsetY = offsetY;

                const desiredSize = Math.min(canvas.width, canvas.height) * 0.5;
                targetScale = desiredSize / 150;

                targetOffsetX = canvas.width / 2 - (album.x + 75) * targetScale;
                targetOffsetY = canvas.height / 2 - (album.y + 75) * targetScale;

                isAnimating = true;
                animStart = null;
                requestAnimationFrame(animateZoom);
                break;
            }
        }
    });

    </script>
</body>
</html>